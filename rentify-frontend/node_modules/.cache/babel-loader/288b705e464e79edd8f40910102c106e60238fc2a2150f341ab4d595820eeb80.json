{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\supri\\\\Desktop\\\\rentify-frontend\\\\src\\\\components\\\\LoginForm.js\",\n  _s = $RefreshSig$();\n// src/components/Login.js\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./LoginForm.css\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginForm = ({\n  handleLogin\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [errors, setErrors] = useState({});\n  const history = useHistory();\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleForgotPasswordClick = () => {\n    history.push(\"/forgot_password\");\n  };\n  const handleLoginClick = async () => {\n    // Validate form fields\n    const newErrors = {};\n    if (!formData.username) {\n      newErrors.username = \"Username is required\";\n    }\n    if (!formData.password) {\n      newErrors.password = \"Password is required\";\n    }\n\n    // Update errors state\n    setErrors(newErrors);\n\n    // Check if there are any errors\n    if (Object.values(newErrors).some(error => error !== \"\")) {\n      return;\n    }\n    try {\n      const response = await axios.post(\"http://localhost:8000/api/login/\", formData);\n      if (response.status === 200 && response.data && response.data.token) {\n        localStorage.setItem(\"token\", response.data.token);\n        localStorage.setItem(\"user_id\", response.data.user_id);\n        localStorage.setItem(\"username\", formData.username);\n        history.push(\"/dashboard\");\n        //handleLogin();\n      } else {\n        // If there is no token or error message in the response\n        setErrors({\n          ...errors,\n          general: \"An error occurred during login\"\n        });\n      }\n    } catch (error) {\n      if (error.response && error.response.status === 401) {\n        // If the error is due to authentication failure (401 Unauthorized)\n        setErrors({\n          ...errors,\n          general: \"Invalid username or password\"\n        });\n      } else if (error.response && error.response.data && error.response.data.error) {\n        // If the server sends a specific error message in the response\n        setErrors({\n          ...errors,\n          general: error.response.data.error\n        });\n      } else {\n        // If there is no specific error message in the response\n        setErrors({\n          ...errors,\n          general: \"An unexpected error occurred during login\"\n        });\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Username:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          value: formData.username,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), errors.username && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"red\"\n          },\n          children: errors.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Password:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: formData.password,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), errors.password && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"red\"\n          },\n          children: errors.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), errors.general && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        children: errors.general\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          cursor: \"pointer\",\n          color: \"blue\"\n        },\n        onClick: handleForgotPasswordClick,\n        children: \"Forgot Password?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleLoginClick,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginForm, \"eadts5d8ntTj9SwfdhXBUWKQ4qI=\", false, function () {\n  return [useHistory];\n});\n_c = LoginForm;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useState","axios","useHistory","jsxDEV","_jsxDEV","LoginForm","handleLogin","_s","formData","setFormData","username","password","errors","setErrors","history","handleChange","e","target","name","value","handleForgotPasswordClick","push","handleLoginClick","newErrors","Object","values","some","error","response","post","status","data","token","localStorage","setItem","user_id","general","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","style","color","cursor","onClick","_c","$RefreshReg$"],"sources":["C:/Users/supri/Desktop/rentify-frontend/src/components/LoginForm.js"],"sourcesContent":["// src/components/Login.js\r\nimport React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./LoginForm.css\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst LoginForm = ({ handleLogin }) => {\r\n  const [formData, setFormData] = useState({ username: \"\", password: \"\" });\r\n  const [errors, setErrors] = useState({});\r\n  const history = useHistory();\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n  const handleForgotPasswordClick = () => {\r\n    history.push(\"/forgot_password\");\r\n  };\r\n\r\n  const handleLoginClick = async () => {\r\n    // Validate form fields\r\n    const newErrors = {};\r\n    if (!formData.username) {\r\n      newErrors.username = \"Username is required\";\r\n    }\r\n    if (!formData.password) {\r\n      newErrors.password = \"Password is required\";\r\n    }\r\n\r\n    // Update errors state\r\n    setErrors(newErrors);\r\n\r\n    // Check if there are any errors\r\n    if (Object.values(newErrors).some((error) => error !== \"\")) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        \"http://localhost:8000/api/login/\",\r\n        formData\r\n      );\r\n\r\n      if (response.status === 200 && response.data && response.data.token) {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"user_id\", response.data.user_id);\r\n        localStorage.setItem(\"username\", formData.username);\r\n        history.push(\"/dashboard\");\r\n        //handleLogin();\r\n      } else {\r\n        // If there is no token or error message in the response\r\n        setErrors({ ...errors, general: \"An error occurred during login\" });\r\n      }\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 401) {\r\n        // If the error is due to authentication failure (401 Unauthorized)\r\n        setErrors({ ...errors, general: \"Invalid username or password\" });\r\n      } else if (\r\n        error.response &&\r\n        error.response.data &&\r\n        error.response.data.error\r\n      ) {\r\n        // If the server sends a specific error message in the response\r\n        setErrors({ ...errors, general: error.response.data.error });\r\n      } else {\r\n        // If there is no specific error message in the response\r\n        setErrors({\r\n          ...errors,\r\n          general: \"An unexpected error occurred during login\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-section\">\r\n      <h2>Login</h2>\r\n      <form>\r\n        <label>\r\n          Username:\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={formData.username}\r\n            onChange={handleChange}\r\n          />\r\n          {errors.username && <p style={{ color: \"red\" }}>{errors.username}</p>}\r\n        </label>\r\n        <br />\r\n        <label>\r\n          Password:\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n          />\r\n          {errors.password && <p style={{ color: \"red\" }}>{errors.password}</p>}\r\n        </label>\r\n        <br />\r\n        {errors.general && <p style={{ color: \"red\" }}>{errors.general}</p>}\r\n        <br />\r\n        <span\r\n          style={{ cursor: \"pointer\", color: \"blue\" }}\r\n          onClick={handleForgotPasswordClick}\r\n        >\r\n          Forgot Password?\r\n        </span>\r\n        <button type=\"button\" onClick={handleLoginClick}>\r\n          Login\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}